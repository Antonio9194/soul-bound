<div class="d-flex justify-content-center align-items-center m-3" style="min-height: calc(100vh - 120px);">
  <div class="col-md-8 col-lg-6">
    <div class="card h-100 p-3 mt-3 shadow rounded-4 border border-2 border-warning" style="background: #fff3e0; color: black;">
      
      <!-- Card header / title -->
      <div class="card-header text-center rounded-3 mb-3 rounded-4 border border-2 border-warning" 
           style="background-color: rgba(255, 193, 7, 0.25);">
        <h1 class="fw-bold" style="font-family: 'Press Start 2P', cursive; font-size: 1.2rem;">
          What brings you here, traveler?
        </h1>
      </div>
      
      <!-- Form content -->
      <%= simple_form_for @journey do |f| %>
        <div data-controller="popup-form" class="d-flex flex-column align-items-center gap-4">
          <!-- Hidden select for Stimulus binding -->
          <%= f.input :purpose, collection: [
            ["To create and stick to a daily routine, because I struggle to stay consistent.", "daily"],
            ["To achieve a long-term goal with multiple deadlines and milestones.", "main"],
            ["Both â€” I seek to build daily habits and reach my big dreams.", "both"]
          ], prompt: "Please select one", label: false, input_html: { class: "d-none", data: { action: "change->popup-form#fire" } } %>

          <!-- Card-style buttons -->
          <div class="d-flex justify-content-center flex-wrap" style="gap: 3.8rem">
            <% choices = { "daily" => "Daily Routine", "main" => "Long Term Goal", "both" => "Both" } %>
            <% choices.each do |value, label| %>
              <button type="button" class="card p-4 shadow rounded-4 border border-2"
                      style="width: 160px; height: 120px; background-color: #f9f1e7; color: black; font-family: 'Press Start 2P', cursive; font-size: 1.5rem;"
                      onclick="document.querySelector('select[name=\'journey[purpose]\']').value='<%= value %>';
                               document.querySelector('select[name=\'journey[purpose]\']').dispatchEvent(new Event('change'));">
                <div class="card-body d-flex align-items-center justify-content-center text-center">
                  <span style="font-size: 1rem;"><%= label %></span>
                </div>
              </button>
            <% end %>
          </div>

          <!-- Conditional input fields -->
          <div data-popup-form-target="dailyQuestsDiv" class="d-none mt-4 w-100" style="max-width: 600px;">
            <div class="card p-3 shadow rounded-4 border border-2 "
                style="background-color: #f9f1e7;">
              <%= f.input :daily_quests, as: :text,
                label: "What daily quests would you like to undertake?",
                input_html: { 
                  placeholder: "Describe your daily routine...",
                  style: "background-color: #fff3e0; border-radius: 12px;
                          font-family: 'Press Start 2P', cursive; color: black; height: 100px; padding: 10px;"
                },
                wrapper_html: { class: "mb-2" } %>
            </div>
          </div>

          <div data-popup-form-target="mainQuestDiv" class="d-none mt-4 w-100" style="max-width: 600px;">
            <div class="card p-3 shadow rounded-4 border border-2"
                style="background-color: #f9f1e7; border-color: #000;">
              <%= f.input :main_quest, as: :text,
                label: "Do you have a main quest or big goal in mind?",
                input_html: { 
                  placeholder: "Describe your goal in detail...",
                  style: "background-color: #fff3e0; border-radius: 12px;
                          font-family: 'Press Start 2P', cursive; color: black; height: 100px; padding: 10px;"
                },
                wrapper_html: { class: "mb-2" } %>
            </div>
          </div>

          <!-- Submit button styled like a card button -->
          <div class="w-100 d-flex justify-content-center mt-4">
            <%= f.button :submit, "Begin Your Journey",
                class: "btn shadow rounded-4 fw-bold",
                style: "background-color: #c68642; color: #fff;
            border: 2px solid #8B5A2B; border-radius: 8px;" %>
          </div>

        </div>
      <% end %>
    </div>
  </div>
</div>